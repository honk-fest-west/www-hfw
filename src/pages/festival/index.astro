---
import Layout from "@layouts/Layout.astro";
import { FestivalApp } from "@thegoldendino/festival-app";
import type { ConfigParams } from "@thegoldendino/festival-app";
import { FestivalBuilder } from "@thegoldendino/festival-app";
import "@thegoldendino/festival-app/default.css";

import DaySchedule from "./_DaySchedule.astro";

// import logoImg from '/src/assets/images/logos/2023-logo-white.png';

// @ts-ignore
import days from "@data/festival/days.toml";
// @ts-ignore
import artists from "@data/festival/artists.toml";
// @ts-ignore
import options from "@data/festival/options.toml";
// @ts-ignore
import stages from "@data/festival/stages.toml";

import honkLogo from "@assets/images/logos/2023-logo-white.png";
const optionsWithLogo = {
  ...options,
  logoImage: honkLogo,
};

const config: ConfigParams = {
  days,
  artists,
  stages,
  options: optionsWithLogo,
};

// Initialize festival data server-side
const festival = new FestivalBuilder(config).build();

function getSchedule(day: { date: string }) {
  return festival.scheduleByDate(day.date);
}
---

<Layout title="2025 Festival" transition={false}>
  <div class="hidden lg:block">
    {
      festival.daysSorted.map((day) => (
        <DaySchedule day={day} daySchedule={getSchedule(day)} />
      ))
    }
  </div>
  <div class="z-50 block lg:hidden">
    <FestivalApp config={config} client:only="svelte" />
  </div>
</Layout>

<style>
  :root {
    --festapp-color-primary-hue: var(--color-teal-hue);
    --festapp-color-secondary-hue: var(--color-gold-hue);
  }
</style>
